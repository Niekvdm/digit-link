@import url('https://fonts.googleapis.com/css2?family=Crimson+Text:wght@400;600&family=JetBrains+Mono:wght@400;500&family=Inter:wght@400;500;600&display=swap');
@import "tailwindcss";

/* Import theme files */
@import "./styles/themes/copper-dark.css";
@import "./styles/themes/midnight-sapphire.css";
@import "./styles/themes/forest-moss.css";
@import "./styles/themes/sunset-rose.css";

/* ============================================
   TAILWIND THEME CONFIGURATION
   ============================================ */

@theme {
  /* Typography */
  --font-display: 'Crimson Text', Georgia, serif;
  --font-mono: 'JetBrains Mono', 'SF Mono', monospace;
  --font-body: 'Inter', -apple-system, sans-serif;

  /* Color tokens mapped to CSS variables */
  --color-bg-deep: var(--bg-deep);
  --color-bg-surface: var(--bg-surface);
  --color-bg-elevated: var(--bg-elevated);
  --color-border-subtle: var(--border-subtle);
  --color-border-accent: var(--border-accent);
  --color-text-primary: var(--text-primary);
  --color-text-secondary: var(--text-secondary);
  --color-text-muted: var(--text-muted);
  --color-accent-primary: var(--accent-primary);
  --color-accent-primary-dim: var(--accent-primary-dim);
  --color-accent-secondary: var(--accent-secondary);
  --color-accent-secondary-dim: var(--accent-secondary-dim);
  --color-accent-amber: var(--accent-amber);
  --color-accent-red: var(--accent-red);
  --color-accent-blue: var(--accent-blue);
  
  /* Legacy color tokens for backwards compatibility */
  --color-accent-copper: var(--accent-primary);
  --color-accent-copper-dim: var(--accent-primary-dim);
  --color-accent-emerald: var(--accent-secondary);

  /* Animation durations */
  --animate-fade-in: fade-in 0.6s ease-out;
  --animate-fade-in-slide: fade-in-slide 0.4s ease-out;
  --animate-spin-slow: spin 0.8s linear infinite;
  --animate-shake: shake 0.4s ease;
  --animate-pulse-slow: pulse 2s ease-in-out infinite;
  --animate-grid-pulse: grid-pulse 8s ease-in-out infinite;
  --animate-icon-float: icon-float 3s ease-in-out infinite;
  --animate-success-pop: success-pop 0.3s ease-out;
  --animate-modal-slide-in: modal-slide-in 0.2s ease-out;

  /* Keyframes */
  @keyframes fade-in {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  @keyframes fade-in-slide {
    from { opacity: 0; transform: translateX(20px); }
    to { opacity: 1; transform: translateX(0); }
  }

  @keyframes shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-8px); }
    75% { transform: translateX(8px); }
  }

  @keyframes grid-pulse {
    0%, 100% { opacity: 0.15; }
    50% { opacity: 0.08; }
  }

  @keyframes icon-float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-4px); }
  }

  @keyframes icon-ring {
    0% { transform: scale(1); opacity: 0.3; }
    100% { transform: scale(1.15); opacity: 0; }
  }

  @keyframes success-pop {
    0% { transform: scale(0); }
    50% { transform: scale(1.1); }
    100% { transform: scale(1); }
  }

  @keyframes modal-slide-in {
    from { opacity: 0; transform: translateY(-20px); }
    to { opacity: 1; transform: translateY(0); }
  }
}

/* ============================================
   BASE STYLES
   ============================================ */

@layer base {
  :root {
    --font-display: 'Crimson Text', Georgia, serif;
    --font-mono: 'JetBrains Mono', 'SF Mono', monospace;
    --font-body: 'Inter', -apple-system, sans-serif;
  }

  html, body, #app {
    @apply w-full h-full min-h-screen;
  }

  body {
    @apply font-body bg-bg-deep text-text-primary antialiased;
  }

  /* Scrollbar styling */
  ::-webkit-scrollbar {
    @apply w-2 h-2;
  }

  ::-webkit-scrollbar-track {
    background: var(--bg-surface);
  }

  ::-webkit-scrollbar-thumb {
    background: var(--border-accent);
    @apply rounded;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: var(--accent-primary-dim);
  }

  /* Selection styling */
  ::selection {
    @apply bg-accent-primary text-bg-deep;
  }
}

/* ============================================
   COMPONENT CLASSES
   ============================================ */

@layer components {
  /* Form Elements */
  .form-input {
    @apply w-full py-3.5 px-4 bg-bg-deep border border-border-subtle rounded 
           font-body text-sm text-text-primary transition-all duration-200;
  }

  .form-input::placeholder {
    @apply text-text-muted;
  }

  .form-input:focus {
    @apply outline-none border-accent-primary;
    box-shadow: 0 0 0 3px rgba(var(--accent-primary-rgb), 0.15);
  }

  .form-input-mono {
    @apply font-mono;
  }

  .form-label {
    @apply block text-xs font-medium uppercase tracking-wider text-text-secondary mb-3;
  }

  .form-hint {
    @apply text-xs text-text-muted mt-2;
  }

  /* Buttons */
  .btn {
    @apply inline-flex items-center justify-center gap-2 py-3.5 px-6 rounded 
           font-body text-sm font-medium cursor-pointer transition-all duration-200 
           relative overflow-hidden border-none;
  }

  .btn:disabled {
    @apply opacity-60 cursor-not-allowed;
    transform: none !important;
  }

  .btn-primary {
    @apply bg-accent-primary text-bg-deep;
  }

  .btn-primary:hover:not(:disabled) {
    @apply bg-accent-primary-dim -translate-y-px;
  }

  .btn-secondary {
    @apply bg-transparent border border-border-subtle text-text-secondary;
  }

  .btn-secondary:hover:not(:disabled) {
    @apply bg-bg-elevated border-border-accent text-text-primary;
  }

  .btn-success {
    @apply bg-accent-secondary text-bg-deep;
  }

  .btn-success:hover:not(:disabled) {
    @apply bg-accent-secondary-dim;
  }

  .btn-danger {
    @apply bg-transparent border border-accent-red text-accent-red;
  }

  .btn-danger:hover:not(:disabled) {
    background: rgba(var(--accent-red-rgb), 0.1);
  }

  .btn-sm {
    @apply py-1.5 px-3 text-xs;
  }

  .btn-icon {
    @apply p-2 rounded;
  }

  .btn-loading .btn-text {
    @apply opacity-0;
  }

  .btn-loading::after {
    content: '';
    @apply absolute w-[18px] h-[18px] top-1/2 left-1/2 -mt-[9px] -ml-[9px] 
           border-2 border-current border-t-transparent rounded-full animate-spin;
  }

  /* Cards */
  .card {
    @apply bg-bg-surface border border-border-subtle rounded;
  }

  .card-header {
    @apply py-5 px-6 border-b border-border-subtle flex items-center justify-between;
  }

  .card-title {
    @apply text-base font-semibold flex items-center gap-3;
  }

  .card-body {
    @apply p-6;
  }

  /* Token Display */
  .token-box {
    @apply bg-bg-deep border-2 border-accent-amber rounded p-5 relative overflow-hidden;
  }

  .token-box::before {
    content: '';
    @apply absolute inset-0 pointer-events-none;
    background: linear-gradient(135deg, rgba(var(--accent-amber-rgb), 0.05), transparent);
  }

  .token-value {
    @apply font-mono text-[0.8rem] break-all leading-relaxed text-accent-amber select-all;
  }

  /* Alert Boxes */
  .warning-box {
    @apply flex gap-3 p-4 rounded;
    background: rgba(var(--accent-red-rgb), 0.08);
    border: 1px solid rgba(var(--accent-red-rgb), 0.3);
  }

  .info-box {
    @apply flex gap-3 py-4 px-5 rounded text-sm text-accent-blue;
    background: rgba(var(--accent-blue-rgb), 0.1);
    border: 1px solid rgba(var(--accent-blue-rgb), 0.3);
  }

  .error-message {
    @apply rounded py-3.5 px-4 text-sm text-accent-red;
    background: rgba(var(--accent-red-rgb), 0.1);
    border: 1px solid var(--accent-red);
  }

  /* Status Indicators */
  .tunnel-status {
    @apply w-2.5 h-2.5 rounded-full bg-accent-secondary animate-pulse;
    box-shadow: 0 0 10px var(--accent-secondary);
  }

  .live-indicator {
    @apply flex items-center gap-2 text-xs text-accent-secondary;
  }

  .live-dot {
    @apply w-1.5 h-1.5 rounded-full bg-accent-secondary animate-pulse;
  }
}

/* ============================================
   DECORATIVE ELEMENTS (Pseudo-elements needed)
   ============================================ */

.grid-background::before {
  content: '';
  @apply fixed inset-0 pointer-events-none z-0 opacity-15;
  background-image: 
    linear-gradient(var(--border-subtle) 1px, transparent 1px),
    linear-gradient(90deg, var(--border-subtle) 1px, transparent 1px);
  background-size: 60px 60px;
}

.grid-background-animated::before {
  @apply animate-grid-pulse;
}

.corner {
  @apply fixed w-[100px] h-[100px] pointer-events-none z-[1];
}

.corner::before,
.corner::after {
  content: '';
  @apply absolute bg-accent-primary opacity-30;
}

.corner-tl { @apply top-8 left-8; }
.corner-tl::before { @apply top-0 left-0 w-[50px] h-0.5; }
.corner-tl::after { @apply top-0 left-0 w-0.5 h-[50px]; }

.corner-br { @apply bottom-8 right-8; }
.corner-br::before { @apply bottom-0 right-0 w-[50px] h-0.5; }
.corner-br::after { @apply bottom-0 right-0 w-0.5 h-[50px]; }

/* Stat card accent line */
.stat-card-accent {
  @apply absolute top-0 left-0 right-0 h-0.5;
}

.stat-card-accent--primary {
  background: linear-gradient(90deg, var(--accent-primary), transparent);
}

.stat-card-accent--secondary {
  background: linear-gradient(90deg, var(--accent-secondary), transparent);
}

.stat-card-accent--amber {
  background: linear-gradient(90deg, var(--accent-amber), transparent);
}

.stat-card-accent--red {
  background: linear-gradient(90deg, var(--accent-red), transparent);
}

.stat-card-accent--blue {
  background: linear-gradient(90deg, var(--accent-blue), transparent);
}

/* ============================================
   VUE TRANSITIONS
   ============================================ */

.fade-enter-active,
.fade-leave-active {
  @apply transition-opacity duration-200 ease-out;
}

.fade-enter-from,
.fade-leave-to {
  @apply opacity-0;
}

.slide-enter-active,
.slide-leave-active {
  @apply transition-all duration-300 ease-out;
}

.slide-enter-from {
  @apply opacity-0 translate-x-5;
}

.slide-leave-to {
  @apply opacity-0 -translate-x-5;
}

.modal-enter-active,
.modal-leave-active {
  @apply transition-all duration-200 ease-out;
}

.modal-enter-from,
.modal-leave-to {
  @apply opacity-0;
}

.modal-enter-from .modal,
.modal-leave-to .modal {
  @apply translate-y-5;
}

.shake-enter-active {
  @apply animate-shake;
}
